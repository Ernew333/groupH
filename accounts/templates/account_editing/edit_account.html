{% extends 'inventories/base.html' %}
{% load django_bootstrap5 %}

{% block content %}
    <h1>Edit Account</h1>
    <div id="errorMessage" class="text-danger mb-3" style="display: none;">Please fill in all required fields. (*)</div>
    <form id="editAccountForm" action="{% url 'accounts:edit_account' %}" method="POST" onsubmit="return validateForm()">
        {% csrf_token %}
        <div class="mb-3">
            <label for="firstName" class="form-label">First Name<span class="required">*</span></label>
            <input type="text" class="form-control" id="firstName" name="firstName">
        </div>
        <div class="mb-3">
            <label for="surname" class="form-label">Surname<span class="required">*</span></label>
            <input type="text" class="form-control" id="surname" name="surname">
        </div>
        <div class="mb-3">
            <label for="email" class="form-label">Your Email<span class="required">*</span></label>
            <input type="email" class="form-control" id="email" name="email">
        </div>
        <div class="mb-3">
            <label for="phoneNumber" class="form-label">Your Phone Number<span class="required">*</span></label>
            <input type="tel" class="form-control" id="phoneNumber" name="phoneNumber" pattern="[0-9]+" title="Please enter numbers only">
        </div>
        <div class="mb-3">
            <label for="password" class="form-label">Password<span class="required">*</span></label>
            <input type="password" class="form-control" id="password" name="password">
        </div>
        <div class="mb-3">
            <label for="rePassword" class="form-label">Re-enter Password<span class="required">*</span></label>
            <input type="password" class="form-control" id="rePassword" name="rePassword">
        </div>
        <button type="submit" class="btn btn-primary">Save</button>
    </form>

    <script>
        function validateForm() {
            var firstName = document.getElementById("firstName").value;
            var surname = document.getElementById("surname").value;
            var email = document.getElementById("email").value;
            var phoneNumber = document.getElementById("phoneNumber").value;
            var password = document.getElementById("password").value;
            var rePassword = document.getElementById("rePassword").value;

            if (firstName === "" || surname === "" || email === "" || phoneNumber === "" || password === "" || rePassword === "") {
                document.getElementById("errorMessage").style.display = "block";
                blinkError();
                return false;
            } else {
                document.querySelectorAll('.required').forEach(function (elem) {
                    elem.style.display = "none";
                });
            }

            return true;
        }

        function blinkError() {
            var errorElem = document.getElementById("errorMessage");
            errorElem.style.fontWeight = "bold";
            setTimeout(function () {
                errorElem.style.fontWeight = "normal";
            }, 1000); // Reset font weight after 2 seconds
        }
    </script>

    <style>
        .required {
            color: red;
            margin-left: 5px;
        }
    </style>
{% endblock content %}
